@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Mobile-optimized system font stack for performance */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.5;
    font-weight: 400;
    
    /* Optimized text rendering for mobile */
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%; /* Prevent iOS text size adjustment */
  }

  html {
    /* Prevent zoom on input focus on iOS */
    font-size: 16px;
  }

  body {
    margin: 0;
    min-width: 320px;
    min-height: 100vh;
    background-color: #ffffff;
    color: #1f2937;
    
    /* Smooth scrolling for mobile */
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Ensure touch-friendly interactive elements */
  button, 
  input[type="range"], 
  .touch-target {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
  }
  
  /* Disable tap highlight on iOS */
  button, 
  a,
  input {
    -webkit-tap-highlight-color: transparent;
  }

  /* Focus styles for accessibility */
  *:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* Skip focus outline for mouse users */
  .js-focus-visible *:focus:not(.focus-visible) {
    outline: none;
  }
}

@layer components {
  /* Risk level indicator components */
  .risk-indicator {
    @apply flex items-center justify-center rounded-full text-white font-semibold shadow-sm;
  }
  
  .risk-low {
    @apply bg-risk-low;
  }
  
  .risk-moderate {
    @apply bg-risk-moderate text-gray-900;
  }
  
  .risk-high {
    @apply bg-risk-high;
  }
  
  .risk-very-high {
    @apply bg-risk-very-high;
  }

  /* Mobile-optimized card component */
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-4;
  }

  /* Touch-friendly button base */
  .btn-base {
    @apply inline-flex items-center justify-center min-h-touch px-4 py-2 text-sm font-medium rounded-lg border transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .btn-primary {
    @apply btn-base bg-blue-600 hover:bg-blue-700 text-white border-transparent focus:ring-blue-500;
  }

  .btn-secondary {
    @apply btn-base bg-gray-100 hover:bg-gray-200 text-gray-900 border-gray-300 focus:ring-gray-500;
  }
}

@layer utilities {
  /* Safe area utilities for notched devices */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Prevent text selection on touch targets */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Momentum scrolling */
  .momentum-scroll {
    -webkit-overflow-scrolling: touch;
  }
}
